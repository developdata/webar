<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>

  </head>
  <body>
    
    <script>
      AFRAME.registerComponent("animate-png", {
        init: function() {
          // load the .pngs
          let loader = new THREE.TextureLoader();
          this.pngArray = []
          this.pngArray.push(loader.load('images/drops01.png'))
          this.pngArray.push(loader.load('images/drops02.png'))
          this.pngArray.push(loader.load('images/drops03.png'))
          this.pngArray.push(loader.load('images/drops04.png'))
          this.pngArray.push(loader.load('images/drops05.png'))
          this.pngArray.push(loader.load('images/drops06.png'))
          this.pngArray.push(loader.load('images/drops07.png'))
          this.pngArray.push(loader.load('images/drops08.png'))
          this.pngArray.push(loader.load('images/drops09.png'))
          this.pngArray.push(loader.load('images/drops10.png'))
          this.pngArray.push(loader.load('images/drops11.png'))
          this.pngArray.push(loader.load('images/drops12.png'))
          this.pngArray.push(loader.load('images/drops13.png'))
          this.pngArray.push(loader.load('images/drops14.png'))
          this.pngArray.push(loader.load('images/drops15.png'))
          this.pngArray.push(loader.load('images/drops16.png'))
          this.pngArray.push(loader.load('images/drops17.png'))
          this.pngArray.push(loader.load('images/drops18.png'))
          this.pngArray.push(loader.load('images/drops19.png'))
          this.pngArray.push(loader.load('images/drops20.png'))
          this.pngArray.push(loader.load('images/drops021.png'))
          this.pngArray.push(loader.load('images/drops022.png'))
          console.log(this.pngArray)
        //   this.pngArray.push(loader.load('https://i.imgur.com/I7PAB.jpg'))
        //   this.pngArray.push(loader.load('https://i.imgur.com/HNluPrg.jpg'))

          this.el.addEventListener('loaded', e => {
            let mesh = this.el.getObject3D("mesh")
            this.material = mesh.material

            var i = 0
            this.id = setInterval(e => {
              if (i >= this.pngArray.length) i = 0;
              this.material.map = this.pngArray[i++]
              this.material.needsUpdate = true
            }, 500)
          })
        },
        remove: function() {
          clearInterval(this.id);
          // free the memory
          for (let i = 0; i < this.pngArray.length; i++) {
            this.pngArray[i].dispose();
          }
        }
      })

    </script>
    <a-scene>
      <a-box position="-1 0.5 -3" rotation="0 45 0" animate-png material="transparent: true"></a-box>
      <a-sky color="#6EBAA7"></a-sky>

    </a-scene>

  </body>
</html>
